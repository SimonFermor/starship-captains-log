<!DOCTYPE html>
<html>
<head>
	<% include ../partials/header.ejs %>
</head>

<body>

<% include ../partials/nav.ejs %>

<!-- Note edit box - shown for editing and contains markdown -->
<div id="edit_box" style="display:none; padding-top:70; padding-bottom:10; border:1px; solid green;">
	<div>Enter notes in markdown below:
		<textarea class="form-control" id="edit_area" note_id="<%= note_rows[0].note_id %>" oninput="this.editor.update()" rows="20" cols="60" 
			><%- note_rows[0].note %></textarea>
	</div>
</div>

<div class="container">
<table style="width: 100%;">
  <tr>
    <td><h2>Captain Arthur's Starship Log</h2></td>
    <td style="text-align: right;">
      Stardate: <%= dateFormat(note_rows[0].created_at) %><br>
      Starlog ID#: <%= note_rows[0].note_id %>
    </td>
  </tr>
</table>

<div class="table-responsive">
	<table style="width: 60%;">
		<tr>
			<td style="width:20%" class="table-title">
				Area of Investigation:
			</td>
			<td>
				<span class="note-data"><%= note_rows[0].title %></span>
				<input name="note_title" type="text" class="form-control" placeholder="<note title>"
					id="note_title" value="<%= note_rows[0].title %>"></input>
			</td>
		</tr>
		<tr>
			<td class="table-title">Keywords:</td>
			<td>
			<% keyword_rows.forEach(function(r) { %>
			  <%= r.keyword %> -
			<% }); %>
			</td>
		</tr>
		<tr>
			<td class="table-title">Summary:</td>
			<td>
				<p class="note-data"><%=note_rows[0].summary %></p>
				<textarea name="note_summary" type="text" class="form-control" placeholder="<brief summary>"
					id="note_summary" value=""><%=note_rows[0].summary %></textarea>
			</td>
		</tr>
		<tr>
			<td class="table-title">Detail Notes:</td>
			<td>
				<div id="note" style="padding: 6px 12px;"><%- note_rows[0].note %></div>
			</td>
		</tr>
	</table>
</div>

</div>

<script>
	// jQuery not yet loaded, so use plain JavaScript
	new Editor(document.getElementById("edit_area"), document.getElementById("note"));
	$('#edit_icon').toggle();
	$('#new_icon').toggle();
	$('.form-control').toggle();
</script>

</body>

</html>
